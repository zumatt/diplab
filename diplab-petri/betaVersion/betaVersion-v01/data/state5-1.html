<!DOCTYPE HTML><html>
<!-----------HEAD----------->
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="assets/style-intro.css">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <title>DiPLab - Alpha Version - State 5.1</title>
</head>
<!-----------BODY----------->
<body>
  <div class="header">
    <div>
      <div class="builder-columns div">
        <div class="builder-column column">
          <button type="button" class="a" id='btn_back'>
            <
          </button>
        </div>
        <div class="builder-column column-2">
          <div class="title"><p>DiPLab</p></div>
        </div>
      </div>
    </div>
  </div>
  <div class="body-text">
    <description-input class="description-input" data-dom-state="description-input-1">
        To start the experience you need to insert your name and class code.
        This will allow you to save your experiment.
      </p>
    </description-input>
  </div>
    <form
      id="infoFrm"
      class="formContainer"
    >
      <input
       name="name"
       placeholder="Write your name here (e.g. Reto)"
       type="text"
       maxlength="20"
       class="form-input"
       required
      ></input>
      <input
       name="classcode"
       placeholder="Insert the class code provided (e.g. #25478)"
       type="text"
       maxlength="5"
       class="form-input"
       required
      ></input>
        <div class="footer-submit">
        <input
          class="button"
          id="btn_next"
          value="Start the experience!"
          style="margin-top: 3vh; padding-left: 5em; padding-right: 5em; font-size: 15px;"
        ></input></div>
    </form>
</body>
<!-----------SCRIPT----------->
<script>
  var Socket;

  document.getElementById('btn_next').addEventListener('click', button_nextFunction);
  document.getElementById('btn_back').addEventListener('click', button_backFunction);
  
  function init() {
      Socket = new WebSocket('ws://' + window.location.hostname + ':81/');
      }
  
  function button_nextFunction() {
      var x = document.getElementById("infoFrm");
      var nameVal = x.elements[0].value;
      var classcodeVal = x.elements[1].value;
      var msg = {
                  state: 6, 
                  name: nameVal,
                  classcode: classcodeVal
                };
      var jsonString = JSON.stringify(msg);
      Socket.send(jsonString);
      console.log("Message sent: " + JSON.stringify(msg));
      if(nameVal != "" && classcodeVal != ""){
        window.location.href='state6.html';
        } else {
          alert("To continue you need to compile\nname and classcode!");
          };
      }
  
  function button_backFunction() {
      var msg = {state: 1};
      var jsonString = JSON.stringify(msg);
      Socket.send(jsonString);
      window.location.href='state1.html';
      console.log("Message sent: " + JSON.stringify(msg));
      }

  window.onload = function(event){
      init();
  }
  </script>
</html>